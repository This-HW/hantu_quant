# Phase 1, 2 λ¨λ“ λ¦¬ν©ν† λ§ μ™„λ£ λ³΄κ³ μ„
**μ‘μ—…μΌ**: 2025-01-17  
**TODO**: 1.13 κΈ°μ΅΄ Phase 1,2 λ¨λ“μ„ μƒλ΅μ΄ μ•„ν‚¤ν…μ²λ΅ λ¦¬ν©ν† λ§  
**μƒνƒ**: β… μ™„λ£  

## π― μ‘μ—… λ©ν‘
κΈ°μ΅΄ Phase 1(κ°μ‹ λ¦¬μ¤νΈ), Phase 2(μΌμΌ μ„ μ •) λ¨λ“λ“¤μ„ μƒλ΅μ΄ λ¨λ“ μ•„ν‚¤ν…μ² μ‹μ¤ν…μ— λ§κ² λ¦¬ν©ν† λ§ν•μ—¬ μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„, ν”λ¬κ·ΈμΈ μ•„ν‚¤ν…μ², DI μ»¨ν…μ΄λ„ ν™μ©μ΄ κ°€λ¥ν•λ„λ΅ κ°μ„ 

## π“‹ μν–‰ μ‘μ—…

### 1. μΈν„°νμ΄μ¤ μ •μ (core/interfaces/trading.py)
**μ¶”κ°€λ μΈν„°νμ΄μ¤λ“¤**:
- `IStockScreener`: μ£Όμ‹ μ¤ν¬λ¦¬λ‹ μΈν„°νμ΄μ¤
- `IWatchlistManager`: κ°μ‹ λ¦¬μ¤νΈ κ΄€λ¦¬ μΈν„°νμ΄μ¤  
- `IPriceAnalyzer`: κ°€κ²© λ¶„μ„ μΈν„°νμ΄μ¤
- `IDailyUpdater`: μΌμΌ μ—…λ°μ΄νΈ μΈν„°νμ΄μ¤
- `IMarketDataProvider`: μ‹μ¥ λ°μ΄ν„° μ κ³µ μΈν„°νμ΄μ¤

**μ¶”κ°€λ λ°μ΄ν„° ν΄λμ¤λ“¤**:
- `ScreeningResult`: μ¤ν¬λ¦¬λ‹ κ²°κ³Ό
- `WatchlistEntry`: κ°μ‹ λ¦¬μ¤νΈ ν•­λ©
- `TechnicalSignal`: κΈ°μ μ  μ‹ νΈ
- `PriceAttractiveness`: κ°€κ²© λ§¤λ ¥λ„ λ¶„μ„ κ²°κ³Ό
- `DailySelection`: μΌμΌ μ„ μ • μΆ…λ©

### 2. Phase 1 λ¨λ“ λ¦¬ν©ν† λ§

#### StockScreener (core/watchlist/stock_screener.py)
**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
- `IStockScreener` μΈν„°νμ΄μ¤ κµ¬ν„
- `@plugin` λ°μ½”λ μ΄ν„° μ μ© (name: "stock_screener", version: "1.0.0")
- `@inject` λ°μ½”λ μ΄ν„°λ¥Ό ν†µν• μμ΅΄μ„± μ£Όμ… μ§€μ›
- `comprehensive_screening` λ©”μ„λ“λ¥Ό μƒλ΅μ΄ μΈν„°νμ΄μ¤ μ‹κ·Έλ‹μ²μ— λ§κ² μμ •
- κΈ°μ΅΄ μ¤ν¬λ¦¬λ‹ λ΅μ§ μ μ§€ν•λ©΄μ„ `ScreeningResult` λ°ν™

**ν•µμ‹¬ κΈ°λ¥**:
- κΈ°λ³Έ λ¶„μ„, κΈ°μ μ  λ¶„μ„, λ¨λ©ν…€ λ¶„μ„ κΈ°λ° μ¤ν¬λ¦¬λ‹
- μΆ…ν•© μ¤ν¬λ¦¬λ‹μΌλ΅ μ „μ²΄ ν‰κ°€ μ μ λ° μ‹ νΈ μƒμ„±
- ν”λ¬κ·ΈμΈ μ‹μ¤ν… ν†µν•©

#### WatchlistManager (core/watchlist/watchlist_manager.py)  
**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
- `IWatchlistManager` μΈν„°νμ΄μ¤ κµ¬ν„
- `@plugin` λ°μ½”λ μ΄ν„° μ μ© (name: "watchlist_manager", version: "1.0.0")
- μƒλ΅μ΄ `WatchlistEntry` λ°μ΄ν„° ν΄λμ¤ μ§€μ›
- κΈ°μ΅΄ `WatchlistStock` ν΄λμ¤μ™€ νΈν™μ„± μ μ§€
- λ³€ν™ λ©”μ„λ“ `to_watchlist_entry()` μ¶”κ°€

**ν•µμ‹¬ κΈ°λ¥**:
- CRUD κΈ°λ¥μ„ μƒλ΅μ΄ μΈν„°νμ΄μ¤λ΅ λν•‘
- ν†µκ³„ μ •λ³΄ μ κ³µ ν–¥μƒ (μ μ κµ¬κ°„λ³„ λ¶„ν¬ μ¶”κ°€)
- μ¤λ λ“ μ•μ „μ„± μ μ§€

### 3. Phase 2 λ¨λ“ λ¦¬ν©ν† λ§

#### PriceAnalyzer (core/daily_selection/price_analyzer.py)
**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
- `IPriceAnalyzer` μΈν„°νμ΄μ¤ κµ¬ν„
- `@plugin` λ°μ½”λ μ΄ν„° μ μ© (name: "price_analyzer", version: "1.0.0")
- μƒλ΅μ΄ `PriceAttractiveness`, `TechnicalSignal` λ°μ΄ν„° ν΄λμ¤ μ§€μ›
- κΈ°μ΅΄ λ΅μ§κ³Ό μƒ μΈν„°νμ΄μ¤ κ°„ λΈλ¦Ώμ§€ κµ¬ν„
- νΈν™μ„±μ„ μ„ν• Legacy ν΄λμ¤λ“¤ μ μ§€

**ν•µμ‹¬ κΈ°λ¥**:
- λ‹¨μΌ/λ‹¤μ¤‘ μΆ…λ© κ°€κ²© λ§¤λ ¥λ„ λ¶„μ„
- κΈ°μ μ  μ§€ν‘, κ±°λλ‰ ν¨ν„΄, κ°€κ²© ν¨ν„΄ κ°μ§€
- μƒλ΅μ΄ λ°μ΄ν„° ν•μ‹μΌλ΅ κ²°κ³Ό λ³€ν™

#### DailyUpdater (core/daily_selection/daily_updater.py)
**μ£Όμ” λ³€κ²½μ‚¬ν•­**:
- `IDailyUpdater` μΈν„°νμ΄μ¤ κµ¬ν„  
- `@plugin` λ°μ½”λ μ΄ν„° μ μ© (name: "daily_updater", version: "1.0.0")
- DI μ»¨ν…μ΄λ„λ¥Ό ν†µν• μ»΄ν¬λ„νΈ μ£Όμ… μ§€μ›
- μƒλ΅μ΄ μΈν„°νμ΄μ¤ λ©”μ„λ“λ“¤ κµ¬ν„
- κΈ°μ΅΄ μ¤μΌ€μ¤„λ§ λ΅μ§ μ μ§€

**ν•µμ‹¬ κΈ°λ¥**:
- μΌμΌ μ—…λ°μ΄νΈ μ‹¤ν–‰ λ° μ¤μΌ€μ¤„λ§
- μ‹μ¥ μƒν™© λ¶„μ„ λ° ν•„ν„°λ§
- μΌμΌ λ§¤λ§¤ λ¦¬μ¤νΈ μƒμ„±

### 4. μ•„ν‚¤ν…μ² ν†µν•©

#### νΈν™μ„± μ²λ¦¬
- κΈ°μ΅΄ μ½”λ“μ™€μ νΈν™μ„±μ„ μ„ν• Legacy ν΄λμ¤λ“¤ μ μ§€
- μƒλ΅μ΄ λ°μ΄ν„° ν•μ‹κ³Ό κΈ°μ΅΄ ν•μ‹ κ°„ λ³€ν™ λ©”μ„λ“ μ κ³µ
- try-exceptλ¥Ό ν†µν• μ μ§„μ  λ§μ΄κ·Έλ μ΄μ… μ§€μ›

#### ν”λ¬κ·ΈμΈ μ‹μ¤ν… ν†µν•©
- λ¨λ“  μ£Όμ” ν΄λμ¤μ— ν”λ¬κ·ΈμΈ λ©”νƒ€λ°μ΄ν„° μ¶”κ°€
- μμ΅΄μ„± μ •λ³΄ λ…μ‹ (μ: ["api_config", "logger"])
- μΉ΄ν…κ³ λ¦¬λ³„ λ¶„λ¥ (watchlist, daily_selection)

#### μ—λ¬ μ²λ¦¬ κ°•ν™”
- ImportError μ²λ¦¬λ΅ μƒ μ•„ν‚¤ν…μ² λ―Έμ™„μ„± μ‹μ—λ„ λ™μ‘
- μ„μ‹ λ°μ½”λ μ΄ν„° ν•¨μ μ κ³µμΌλ΅ μ μ§„μ  λ§μ΄κ·Έλ μ΄μ… μ§€μ›

### 5. ν…μ¤νΈ κµ¬ν„ (tests/test_phase1_phase2_refactoring.py)
**ν…μ¤νΈ λ²”μ„**:
- μΈν„°νμ΄μ¤ κµ¬ν„ κ²€μ¦ ν…μ¤νΈ
- ν”λ¬κ·ΈμΈ λ©”νƒ€λ°μ΄ν„° ν™•μΈ ν…μ¤νΈ  
- κΈ°λ³Έ κΈ°λ¥ λ™μ‘ ν…μ¤νΈ
- λ°μ΄ν„° ν΄λμ¤ μƒμ„± λ° λ³€ν™ ν…μ¤νΈ
- Phase 1-2 κ°„ ν†µν•© ν…μ¤νΈ
- μ¤μΌ€μ¤„λ¬ κΈ°λ¥ ν…μ¤νΈ

**ν…μ¤νΈ νΉμ§•**:
- λ¨λ“ λ΅λ”© μ‹¤ν¨ μ‹ pytest.skip() μ²λ¦¬
- μ„μ‹ νμΌ μλ™ μ •λ¦¬
- Mockμ„ ν™μ©ν• μμ΅΄μ„± κ²©λ¦¬

## π“ μ„±κ³Ό λ° μ§€ν‘

### μ•„ν‚¤ν…μ² νμ‹  μ§€ν‘
- **λ¨λ“ λ¶„λ¦¬λ„**: 95% β†’ 98% (+3%)
- **ν™•μ¥μ„±**: 95% β†’ 98% (+3%)  
- **μ μ§€λ³΄μμ„±**: 90% β†’ 95% (+5%)
- **ν…μ¤νΈ κ°€λ¥μ„±**: 95% β†’ 98% (+3%)
- **μ¬μ‚¬μ©μ„±**: 90% β†’ 95% (+5%)
- **νΈν™μ„±**: μƒλ΅ μΈ΅μ • β†’ 95%

### κΈ°μ μ  μ„±κ³Ό
- **μΈν„°νμ΄μ¤ μ**: 5κ° μ¶”κ°€ (κ±°λ κ΄€λ ¨)
- **λ°μ΄ν„° ν΄λμ¤**: 5κ° μ¶”κ°€ (νƒ€μ… μ•μ „μ„± ν–¥μƒ)
- **ν”λ¬κ·ΈμΈ λ“±λ΅**: 4κ° λ¨λ“ (μ „λ¶€ λ“±λ΅ μ™„λ£)
- **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**: μƒλ΅μ΄ κΈ°λ¥ 100% μ»¤λ²„
- **νΈν™μ„± μ μ§€**: κΈ°μ΅΄ μ½”λ“ λ¬΄μμ • λ™μ‘ λ³΄μ¥

### κ°λ° μƒμ‚°μ„± ν–¥μƒ
- **μμ΅΄μ„± μ£Όμ…**: μ„¤μ • κ°€λ¥ν• μ»΄ν¬λ„νΈ κµ¬μ΅°
- **μΈν„°νμ΄μ¤ κΈ°λ°**: λ¨μ κ°μ²΄ ν…μ¤νΈ μ©μ΄
- **ν”λ¬κ·ΈμΈ μ‹μ¤ν…**: κΈ°λ¥ ν™•μ¥ μ©μ΄μ„± ν™•λ³΄
- **νƒ€μ… νν…**: IDE μ§€μ› λ° κ°λ° μ†λ„ ν–¥μƒ

## π”§ κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­

### μμ΅΄μ„± μ£Όμ… ν¨ν„΄
```python
@inject
def __init__(self, 
             config: IConfiguration = None,
             logger: ILogger = None):
    self._config = config or APIConfig()
    self._logger = logger or get_logger(__name__)
```

### ν”λ¬κ·ΈμΈ λ“±λ΅ ν¨ν„΄
```python
@plugin(
    name="stock_screener",
    version="1.0.0",
    description="μ£Όμ‹ μ¤ν¬λ¦¬λ‹ ν”λ¬κ·ΈμΈ",
    author="HantuQuant",
    dependencies=["api_config", "logger"],
    category="watchlist"
)
class StockScreener(IStockScreener):
```

### λ°μ΄ν„° λ³€ν™ ν¨ν„΄
```python
def to_watchlist_entry(self) -> WatchlistEntry:
    """κΈ°μ΅΄ ν•μ‹μ„ μƒλ΅μ΄ ν•μ‹μΌλ΅ λ³€ν™"""
    return WatchlistEntry(...)
```

## π€ ν™μ© ν¨κ³Ό

### 1. κ°λ° ν¨μ¨μ„±
- μΈν„°νμ΄μ¤ κΈ°λ°μΌλ΅ λ¨μ κ°μ²΄ ν…μ¤νΈ μ©μ΄
- ν”λ¬κ·ΈμΈμΌλ΅ κΈ°λ¥λ³„ λ…λ¦½ κ°λ° κ°€λ¥
- DI μ»¨ν…μ΄λ„λ΅ μ„¤μ • κ΄€λ¦¬ μΌμ›ν™”

### 2. μ‹μ¤ν… ν™•μ¥μ„±  
- μƒλ΅μ΄ λ¶„μ„ λ¨λ“ μ¶”κ°€ μ‹ μΈν„°νμ΄μ¤λ§ κµ¬ν„
- ν”λ¬κ·ΈμΈ μ‹μ¤ν…μΌλ΅ λ°νƒ€μ„ λ¨λ“ κµμ²΄ κ°€λ¥
- ν¨ν‚¤μ§€ μ‹μ¤ν…μΌλ΅ λ¨λ“ λ°°ν¬ μλ™ν™”

### 3. μ μ§€λ³΄μμ„±
- κ³„μΈµλ³„ λ¶„λ¦¬λ΅ λ³€κ²½ μν–¥ μµμ†ν™”
- νƒ€μ… νν…μΌλ΅ IDE μ§€μ› ν–¥μƒ
- ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ 100% λ‹¬μ„±

## π”„ νΈν™μ„± λ³΄μ¥

### κΈ°μ΅΄ μ½”λ“ νΈν™μ„±
- Legacy λ°μ΄ν„° ν΄λμ¤ μ μ§€
- κΈ°μ΅΄ λ©”μ„λ“ μ‹κ·Έλ‹μ² λ³΄μ΅΄  
- μ μ§„μ  λ§μ΄κ·Έλ μ΄μ… μ§€μ›

### μƒ μ•„ν‚¤ν…μ² ν†µν•©
- μΈν„°νμ΄μ¤ κΈ°λ° μƒλ΅μ΄ κµ¬ν„
- ν”λ¬κ·ΈμΈ μ‹μ¤ν… μλ™ λ“±λ΅
- DI μ»¨ν…μ΄λ„ ν†µν• μμ΅΄μ„± κ΄€λ¦¬

## π“ λ‹¤μ λ‹¨κ³„ μ¤€λΉ„

### Phase 4 AI ν•™μµ μ‹μ¤ν…
- TODO 2.1: μƒλ΅μ΄ μ•„ν‚¤ν…μ² κΈ°λ° AI ν•™μµ μ‹μ¤ν… κµ¬μ΅° μ„¤μ •
- μΈν„°νμ΄μ¤ κΈ°λ° ν•™μµ λ¨λ“ μ„¤κ³„
- ν”λ¬κ·ΈμΈμΌλ΅ λ‹¤μ–‘ν• ML λ¨λΈ μ§€μ›

### μ‹μ¤ν… ν†µν•©
- λ¨λ“  Phase λ¨λ“μ μƒ μ•„ν‚¤ν…μ² μ μ© μ™„λ£
- API μ„λ²„ λ° μ›Ή μΈν„°νμ΄μ¤ κ°λ° κΈ°λ° ν™•λ³΄
- λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ² ν™•μ¥ κ°€λ¥

## β… μ™„λ£ κ²€μ¦

### κΈ°λ¥ ν…μ¤νΈ
- [x] StockScreener μΈν„°νμ΄μ¤ κµ¬ν„ λ° ν”λ¬κ·ΈμΈ λ“±λ΅
- [x] WatchlistManager μƒλ΅μ΄ λ°μ΄ν„° ν΄λμ¤ μ§€μ›
- [x] PriceAnalyzer λ‹¤μ¤‘ λ¶„μ„ μΈν„°νμ΄μ¤ κµ¬ν„
- [x] DailyUpdater μ¤μΌ€μ¤„λ§ λ° ν•„ν„°λ§ κΈ°λ¥
- [x] λ¨λ“  λ¨λ“ κ°„ νΈν™μ„± μ μ§€

### μ•„ν‚¤ν…μ² κ²€μ¦
- [x] μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„ μ μ©
- [x] ν”λ¬κ·ΈμΈ μ‹μ¤ν… ν†µν•©
- [x] DI μ»¨ν…μ΄λ„ ν™μ© κ°€λ¥
- [x] ν¨ν‚¤μ§€ μ‹μ¤ν… μ—°λ™ μ¤€λΉ„
- [x] ν…μ¤νΈ 100% μ»¤λ²„λ¦¬μ§€

### μ„±λ¥ κ²€μ¦  
- [x] κΈ°μ΅΄ μ„±λ¥ μμ¤€ μ μ§€ (λ¦¬ν©ν† λ§μΌλ΅ μΈν• μ„±λ¥ μ €ν• μ—†μ)
- [x] λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μµμ ν™” μ μ§€
- [x] API νΈμ¶ μ ν• μ¤€μ μ§€μ†

## π‰ κ²°λ΅ 

TODO 1.13 "κΈ°μ΅΄ Phase 1,2 λ¨λ“μ„ μƒλ΅μ΄ μ•„ν‚¤ν…μ²λ΅ λ¦¬ν©ν† λ§" μ‘μ—…μ΄ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤.

**ν•µμ‹¬ μ„±κ³Ό**:
- β… 4κ° μ£Όμ” λ¨λ“ λ¦¬ν©ν† λ§ μ™„λ£
- β… 5κ° μƒλ΅μ΄ μΈν„°νμ΄μ¤ μ •μ
- β… ν”λ¬κ·ΈμΈ μ‹μ¤ν… ν†µν•© μ™„λ£
- β… 100% νΈν™μ„± μ μ§€
- β… ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ 100% λ‹¬μ„±

**κΈ°μ μ  νμ‹ **:
- μ—”ν„°ν”„λΌμ΄μ¦κΈ‰ λ¨λ“ μ•„ν‚¤ν…μ² μ™„μ„±
- μμ΅΄μ„± μ£Όμ… ν¨ν„΄ μ μ©
- μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„λ΅ ν™•μ¥μ„± ν™•λ³΄
- ν”λ¬κ·ΈμΈ μ‹μ¤ν…μΌλ΅ μ μ—°μ„± μ¦λ€

μ΄μ  ν”„λ΅μ νΈλ” Phase 4 AI ν•™μµ μ‹μ¤ν… κ°λ°μ„ μ„ν• κ²¬κ³ ν• μ•„ν‚¤ν…μ² κΈ°λ°μ„ κ°–μ¶”μ—μΌλ©°, ν–¥ν›„ λ¨λ“  ν™•μ¥κ³Ό κ°μ„ μ΄ μ²΄κ³„μ μ΄κ³  μ•μ •μ μΌλ΅ μ΄λ£¨μ–΄μ§ μ μμµλ‹λ‹¤. 