# Phase 2 일일 종목 선정 설정
# ==============================================

# 안전 필터 기준 (Phase A)
safety_filter:
  max_risk_score: 60 # 리스크 점수 상한 (0-100)
  min_volume_score: 5 # 최소 거래량 점수 (0-100)

# 레거시 필터링 기준 (FilteringCriteria)
legacy_filter:
  price_attractiveness: 46.0 # 가격 매력도 점수 기준 (상위 30%)
  volume_threshold: 1.5 # 평균 거래량 대비 배수
  volatility_min: 0.1 # 최소 변동성 (10%)
  volatility_max: 0.4 # 최대 변동성 (40%)
  market_cap_min: 10000000000 # 최소 시가총액 (100억원)
  liquidity_score: 10.0 # 유동성 점수 기준
  risk_score_max: 43.0 # 최대 리스크 점수 (중위수 기준)
  sector_limit: 3 # 섹터별 최대 종목 수
  total_limit: 20 # 전체 최대 종목 수
  confidence_min: 0.62 # 최소 신뢰도 (상위 40%)
  min_relative_strength: 0.6 # 시장 대비 상위 40%
  min_technical_score: 40.0 # 기술적 점수 최소값

# 종합 점수 가중치 (Phase A)
composite_weights:
  technical: 0.35 # 기술적 지표 (35%)
  volume: 0.25 # 거래량 (25%)
  risk: 0.25 # 리스크 (25%, 역수 적용)
  confidence: 0.15 # 신뢰도 (15%)

# 시장 적응형 선정 개수 (Phase A)
adaptive_selection:
  bullish: 12 # 상승장: 12개
  neutral: 8 # 중립장: 8개
  bearish: 5 # 하락장: 5개

# 섹터 다각화 제한
diversification:
  max_stocks_per_sector: 3 # 섹터당 최대 종목 수

# 배치 처리 설정
batch_processing:
  batch_count: 18 # 총 배치 개수
  batch_interval_minutes: 5 # 배치 간 실행 간격 (분)
  start_hour: 7 # 시작 시간 (시)
  start_minute: 0 # 시작 시간 (분)

# API 재시도 설정 (P0)
api_retry:
  max_retries: 3 # 최대 재시도 횟수
  base_delay: 1.0 # 기본 대기 시간 (초)
  max_delay: 10.0 # 최대 대기 시간 (초)
  exponential_base: 2 # 지수 백오프 배수
  jitter: 0.1 # 랜덤 지터 (0-1)

# 병렬 처리 설정
concurrency:
  max_concurrent_requests: 5 # 최대 동시 요청 수
  request_timeout: 30 # 요청 타임아웃 (초)

# 배치 우선순위 계산 설정
priority_calculation:
  # 복합 우선순위 가중치
  weights:
    technical: 0.5 # 기술적 점수 (50%)
    volume: 0.3 # 거래량 점수 (30%)
    volatility: 0.2 # 변동성 점수 (20%)

  # 변동성 점수 계산 기준
  volatility_scoring:
    optimal_min: 0.1 # 최적 변동성 하한 (10%)
    optimal_max: 0.3 # 최적 변동성 상한 (30%)
    low_scale_factor: 500 # 낮은 변동성 스케일링 (0-10% → 0-50점)
    high_penalty_factor: 200 # 높은 변동성 패널티 (30%+ → 감점)

# API 폴백 기본값
api_fallback:
  kospi_default: 2500.0 # KOSPI 기본값
  kosdaq_default: 850.0 # KOSDAQ 기본값
  vix_default: 20.0 # VIX 기본값
  usd_krw_default: 1300.0 # USD/KRW 기본값
  sector_momentum_neutral: 50.0 # 섹터 모멘텀 중립값 (0-100)

# 섹터 ETF 매핑 (KOSPI 11개 섹터)
sector_etf_map:
  IT: "139270" # TIGER 200IT
  금융: "139260" # TIGER 200금융
  건설: "102780" # KODEX 건설
  에너지화학: "117680" # TIGER 에너지화학
  철강소재: "117700" # TIGER 철강소재
  자동차: "091180" # KODEX 자동차
  반도체: "091160" # KODEX 반도체
  바이오: "091230" # TIGER 헬스케어
  운송: "140700" # KODEX 운송
  유통: "117460" # TIGER 유통
  미디어통신: "091220" # KODEX 미디어통신

# 클라이언트 캐싱 설정
client_caching:
  enabled: true # 캐싱 활성화
  ttl_seconds: 3600 # 캐시 TTL (1시간)
