---
name: cost-report
description: |
  비용 분석 리포트 스킬. Claude API 사용량, 토큰 소비, 에이전트별 비용을 분석합니다.
domain: common
invoke: /cost-report
---

# /cost-report - 비용 분석 리포트

시스템 비용을 분석하고 최적화 제안을 제공합니다.

---

## 사용법

```bash
/cost-report                     # 이번 달 비용 리포트
/cost-report today               # 오늘 비용
/cost-report week                # 이번 주 비용
/cost-report month               # 이번 달 비용
/cost-report compare [기간]      # 기간 비교
/cost-report by-agent            # 에이전트별 분석
/cost-report optimize            # 최적화 제안
```

---

## 분석 항목

### 1. API 사용량

```
- 총 API 호출 수
- 모델별 호출 (opus/sonnet/haiku)
- 입력/출력 토큰
- 예상 비용
```

### 2. 에이전트별 분석

```
- 에이전트별 호출 횟수
- 에이전트별 토큰 소비
- 에이전트별 비용
- 효율성 지표 (토큰/작업)
```

### 3. 추세 분석

```
- 일별/주별/월별 추이
- 전월 대비 변화
- 비용 예측
```

---

## 실행 흐름

```
/cost-report
      │
      ▼
┌─────────────┐
│ 로그 수집   │
│ (subagents) │
└─────────────┘
      │
      ▼
┌─────────────┐
│ 데이터      │
│ 집계        │
└─────────────┘
      │
      ▼
┌─────────────┐
│ 비용 계산   │
│ (가격표)    │
└─────────────┘
      │
      ▼
┌─────────────┐
│ 리포트      │
│ 생성        │
└─────────────┘
      │
      ▼
┌─────────────┐
│ 최적화      │
│ 제안        │
└─────────────┘
```

---

## 출력 예시

### 월간 리포트

```markdown
# 💰 비용 분석 리포트

**기간**: 2026-01-01 ~ 2026-01-30

## 요약

| 항목        | 값    | 전월 대비 |
| ----------- | ----- | --------- |
| 총 API 호출 | 1,234 | +26%      |
| 총 토큰     | 2.5M  | +19%      |
| 예상 비용   | $125  | +$20      |

## 모델별 사용량

| 모델   | 호출 | 토큰 | 비용 | 비율 |
| ------ | ---- | ---- | ---- | ---- |
| opus   | 89   | 500K | $75  | 60%  |
| sonnet | 456  | 1.2M | $36  | 29%  |
| haiku  | 689  | 800K | $14  | 11%  |

## 에이전트별 Top 5

| 에이전트       | 호출 | 토큰 | 비용 |
| -------------- | ---- | ---- | ---- |
| implement-code | 234  | 600K | $30  |
| review-code    | 89   | 400K | $45  |
| clarify-req    | 56   | 200K | $24  |
| explore-code   | 123  | 150K | $8   |
| write-tests    | 78   | 180K | $9   |

## 일별 추이
```

1/1 ████████ $4.2
1/2 ██████ $3.1
...
1/30 ██████████ $5.5

```

## 최적화 제안

### 🔴 높은 영향 (예상 절감: $30/월)

1. **opus → sonnet 전환 검토**
   - clarify-requirements: opus 사용 중
   - 비용: $24/월
   - 제안: sonnet으로 충분한 품질
   - 예상 절감: $18/월

2. **중복 탐색 감소**
   - explore-codebase 과다 호출
   - 캐싱/인덱스 활용 권장
   - 예상 절감: $12/월

### 🟡 중간 영향

3. **병렬 호출 최적화**
   - 중복 결과 재사용 권장
```

---

## 데이터 소스

| 데이터        | 소스                  |
| ------------- | --------------------- |
| API 호출 로그 | ~/.claude/logs/       |
| 에이전트 통계 | logs/subagents/       |
| 토큰 사용량   | 로그 파싱             |
| 모델 가격     | Anthropic 공식 가격표 |

---

## 모델 가격 기준 (2026년)

| 모델   | 입력 (1M 토큰) | 출력 (1M 토큰) |
| ------ | -------------- | -------------- |
| opus   | $15            | $75            |
| sonnet | $3             | $15            |
| haiku  | $0.25          | $1.25          |

---

## 연동 에이전트

| 에이전트       | 역할            |
| -------------- | --------------- |
| optimize-costs | 상세 비용 분석  |
| monitor        | 사용량 모니터링 |
| notify-team    | 비용 알림 발송  |

---

## 관련 스킬

| 스킬          | 설명            |
| ------------- | --------------- |
| /alert-setup  | 비용 알림 설정  |
| /project-sync | 프로젝트 동기화 |
| /daily-report | 일일 리포트     |
