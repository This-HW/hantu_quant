# 기획 확인 규칙

> 애매하거나 불확실한 부분이 있으면 반드시 기획을 재확인합니다.
> 추측으로 구현하지 않습니다.

---

## 핵심 원칙

### "확실하지 않으면, 멈추고 확인한다"

```
❌ 추측 기반 구현
   "아마 이렇게 동작해야 할 것 같아서..."
   "보통 이런 식으로 하니까..."

✅ 확인 기반 구현
   "기획서 확인 결과 [X]로 동작해야 합니다"
   "명세에 따르면 [Y] 조건에서 [Z]를 수행합니다"
```

---

## 기획 확인이 필요한 상황

### 1. 요구사항 불명확

```
신호:
- "~해야 할 것 같다"
- "아마 ~일 것이다"
- "보통은 ~하니까"

→ 즉시 기획 문서 확인
```

### 2. 엣지 케이스

```
예시:
- 입력값이 비어있을 때 어떻게?
- 네트워크 오류 시 어떻게?
- 권한이 없을 때 어떻게?
- 데이터가 없을 때 어떻게?

→ 기획서에 정의되어 있는지 확인
→ 없으면 사용자에게 질문
```

### 3. 다중 해석 가능

```
예시:
- "사용자 정보 표시" → 어떤 정보? 어떤 형식?
- "목록 정렬" → 기준? 방향?
- "알림 발송" → 언제? 누구에게? 어떤 채널?

→ 명확한 정의 확인 필요
```

### 4. 비즈니스 로직

```
예시:
- 할인 계산 로직
- 권한 체계
- 상태 전이 규칙
- 유효성 검증 규칙

→ 반드시 기획서/명세 기반으로 구현
```

---

## 기획 문서 위치 (프로젝트별 설정)

```
프로젝트에서 다음 위치를 지정하세요:

docs/
├── planning/              # 기획 문서
│   ├── requirements/      # 요구사항 명세
│   ├── features/          # 기능 명세
│   └── flows/             # 사용자 흐름
│
├── design/                # 디자인 문서
│   ├── wireframes/        # 와이어프레임
│   └── specs/             # 디자인 스펙
│
└── api/                   # API 명세
    └── specs/             # OpenAPI 등
```

**또는 외부 도구:**
- Notion: 기획 문서
- Figma: 디자인 스펙
- Swagger: API 명세

---

## 기획 확인 워크플로우

### Step 1: 불확실성 감지

```
구현 중 다음을 느끼면 멈춤:
- "이게 맞나?"
- "어떻게 해야 하지?"
- "기획에 이 부분이 있었나?"
```

### Step 2: 기획 문서 검색

```
1. 프로젝트 내 기획 문서 확인
   └→ docs/planning/, docs/features/

2. 외부 기획 도구 확인 (설정된 경우)
   └→ Notion MCP, Figma MCP

3. 관련 이슈/티켓 확인
   └→ GitHub Issues, Jira
```

### Step 3: 정보 부재 시

```
기획에 정의되지 않은 경우:

1. 사용자에게 질문
   └→ AskUserQuestion 도구 사용

2. 질문 형식:
   "기획 문서에서 [X 상황]에 대한 정의를 찾지 못했습니다.
    다음 중 어떻게 처리할까요?
    A) [옵션 1]
    B) [옵션 2]
    C) 기획 담당자 확인 필요"
```

### Step 4: 결정 기록

```
결정된 사항은 기록:

// 기획 확인: 2024-01-15
// 결정: 빈 목록일 때 "데이터 없음" 메시지 표시
// 근거: docs/planning/features/list-view.md#empty-state
```

---

## 확인 체크리스트

### 구현 전 확인

- [ ] 이 기능의 요구사항 문서가 있는가?
- [ ] 모든 상태(성공/실패/로딩/빈 값)가 정의되어 있는가?
- [ ] 엣지 케이스 처리가 명시되어 있는가?
- [ ] UI/UX 스펙이 있는가?

### 구현 중 확인

- [ ] 추측으로 구현하고 있지 않은가?
- [ ] 기획과 다르게 구현하고 있지 않은가?
- [ ] 기획에 없는 기능을 추가하고 있지 않은가?

### 구현 후 확인

- [ ] 구현 결과가 기획과 일치하는가?
- [ ] 모든 케이스가 기획대로 동작하는가?

---

## 질문 템플릿

### 요구사항 불명확 시

```
[기능명]에 대해 확인이 필요합니다.

상황: [현재 구현하려는 것]
불명확한 점: [구체적인 질문]

옵션:
A) [가능한 해석 1]
B) [가능한 해석 2]

기획 문서에서 관련 내용을 찾지 못했습니다.
어떤 방향으로 진행할까요?
```

### 엣지 케이스 미정의 시

```
[기능명]의 예외 상황 처리가 필요합니다.

상황: [예외 상황 설명]
현재 기획: [기획에 정의된 내용]
미정의 케이스: [정의되지 않은 케이스]

제안:
A) [제안 1] - [근거]
B) [제안 2] - [근거]

어떻게 처리할까요?
```

---

## 관련 에이전트

| 상황 | 위임 대상 |
|------|----------|
| 기획 문서 탐색 | **Dev/explore-codebase** |
| 외부 기획 도구 연동 | MCP 서버 (Notion, Figma 등) |
| 요구사항 분석 | **Dev/analyze-dependencies** |
| 기획 기반 구현 | **Dev/plan-implementation** → **Dev/implement-code** |

---

## 프로젝트 설정

**CLAUDE.md에 다음을 추가하세요:**

```markdown
## 기획 문서 위치

| 유형 | 위치 |
|------|------|
| 요구사항 | docs/planning/requirements/ |
| 기능 명세 | docs/planning/features/ |
| 디자인 스펙 | [Figma 링크] |
| API 명세 | docs/api/specs/ |

## 기획 확인 규칙

- 불확실하면 구현 전 확인
- 추측 금지
- 결정 사항은 코드에 주석으로 기록
```
