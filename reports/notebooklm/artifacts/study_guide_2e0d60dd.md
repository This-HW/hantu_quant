# 한투 퀀트 트레이딩 시스템 학습 가이드

본 가이드는 한국투자증권 Open API를 활용한 AI 기반 자동화 주식 트레이딩 시스템인 '한투 퀀트(Hantu Quant)'의 핵심 알고리즘, 시스템 아키텍처, 그리고 운영 프로세스를 깊이 있게 이해하기 위해 제작되었습니다.

---

## 1. 시스템 핵심 개념 요약

한투 퀀트 시스템은 종목 발굴부터 사후 분석까지 총 6단계(Phase)의 파이프라인으로 구성된 엔터프라이즈급 자동 매매 플랫폼입니다.

### 단계별 주요 기능 (Phase 1 ~ Phase 6)
*   **Phase 1: 스크리닝 (감시 리스트)** - 2,875개 전체 상장 종목을 재무, 기술적, 모멘텀 지표로 분석하여 약 50~200개의 감시 종목을 선별합니다.
*   **Phase 2: 일일 선정 (매매 리스트)** - 감시 리스트 중 당일 가격 매력도와 시장 상황을 고려하여 최적의 매매 대상 종목(5~10개)을 확정합니다.
*   **Phase 3: 매매 실행 (Trading)** - 한국투자증권 API와 연동하여 실제 주문을 실행하며, 사전 가드(업틱비율, 스프레드 등)를 통해 진입 시점을 조절합니다.
*   **Phase 4: AI 학습 (Learning)** - 17개 고급 피처(기울기 9개, 볼륨 8개)를 추출하고 머신러닝 모델(RandomForest, MLP 등)을 통해 성공 패턴을 학습합니다.
*   **Phase 5: 시장 모니터링** - 실시간으로 시장을 감시하며 8가지 유형의 이상 징후를 탐지하고 7개 채널로 알림을 전송합니다.
*   **Phase 6: 웹 인터페이스** - React 기반의 대시보드를 통해 시스템 상태, 성과 지표, AI 학습 결과 등을 실시간으로 시각화합니다.

### 아키텍처 특징
*   **플러그인 시스템**: 98%의 모듈 분리도를 달성하여 런타임 중에 모듈을 교체하거나 확장할 수 있습니다.
*   **의존성 주입 (DI)**: DI 컨테이너를 통해 컴포넌트 간의 결합도를 낮추고 테스트 가능성을 높였습니다.
*   **안정성 관리**: 회로 차단기(Circuit Breaker), 재시도(Retry) 로직, 자동 복구 메커니즘을 내장하여 99.9% 가동률을 목표로 합니다.

---

## 2. 주요 용어 사전 (Glossary)

| 용어 | 정의 및 시스템 내 역할 |
| :--- | :--- |
| **Kelly Criterion (켈리 공식)** | 과거 성과를 기반으로 자산의 투입 비중을 결정하는 수학적 모델입니다. 리스크를 관리하며 복리 수익을 극대화하는 데 사용됩니다. |
| **ATR (Average True Range)** | 시장의 변동성을 측정하는 지표입니다. 시스템에서는 ATR을 기반으로 추적 손절(Trailing Stop) 거리를 동적으로 설정합니다. |
| **Sharpe Ratio (샤프 지수)** | 위험 대비 수익률을 나타내는 지표입니다. 백테스트 시 전략의 효율성을 평가하는 핵심 메트릭으로 활용됩니다. |
| **MDD (Max Drawdown)** | 특정 기간 동안 발생한 최대 낙폭입니다. 시스템의 서킷 브레이커는 일일/주간/최대 MDD를 기준으로 매매를 중단시킵니다. |
| **Walk-Forward Analysis** | 시계열 데이터를 롤링 윈도우 방식으로 분할하여 검증하는 방법입니다. 과적합(Overfitting)을 방지하기 위해 사용됩니다. |
| **Purge Gap** | 학습 데이터와 테스트 데이터 경계에 설정하는 격리 기간으로, 데이터 누수(Data Leakage)를 방지하여 백테스트 신뢰도를 높입니다. |
| **.hqp 포맷** | 시스템의 독립 패키지 시스템으로, 모듈의 재사용성과 배포 자동화를 위해 설계된 전용 패키지 형식입니다. |
| **VWAP (거래량 가중 평균가)** | 당일 거래량을 가중치로 둔 평균 가격입니다. 매수 시 VWAP와의 괴리를 확인하여 과도한 추격 매수를 방지합니다. |

---

## 3. 단답형 연습 문제

**Q1. Phase 1 스크리닝 단계에서 종목이 통과하기 위한 완화 정책 기준(총점 및 개별 지표 점수)은 무엇인가요?**
> **정답:** 펀더멘털/테크니컬/모멘텀 점수 중 2개 이상이 45.0점 이상이고, 전체 총점이 60.0점 이상이어야 합니다.

**Q2. 시스템이 제공하는 7가지 통합 알림 채널은 무엇인가요?**
> **정답:** 텔레그램, 이메일, SMS, 슬랙, 디스코드, 웹푸시, 콘솔입니다.

**Q3. Phase 4 AI 학습 시스템에서 추출하는 고급 피처는 총 몇 개이며, 각각 어떤 범주로 나뉘나요?**
> **정답:** 총 17개이며, 기울기 피처 9개와 볼륨(거래량) 피처 8개로 나뉩니다.

**Q4. 백테스트 시스템(StrategyBacktester)에서 기본적으로 반영하는 3가지 거래 비용의 세부 요율은 어떻게 되나요?**
> **정답:** 수수료 0.015%, 증권거래세 0.23%, 슬리페이지 0.05%입니다.

**Q5. 시스템의 CLI 통합 인터페이스 명령축약어(Alias) 중 'status' 명령어를 대신할 수 있는 두 가지는 무엇인가요?**
> **정답:** 'st'와 'ps'입니다.

**Q6. 수익성 개선 로드맵 P0 단계에서 지적된 '타이트한 손절선'의 현재 수치는 몇 퍼센트인가요?**
> **정답:** -3%입니다. (한국 시장의 노이즈로 인해 조기 청산 위험이 있음이 지적됨)

---

## 4. 심화 학습을 위한 에세이 주제

### 주제 1: 시스템 아키텍처의 유연성과 안정성
한투 퀀트 시스템은 '플러그인 아키텍처'와 '회로 차단기(Circuit Breaker)'를 동시에 채택하고 있습니다. 이러한 설계가 급변하는 금융 시장 환경에서 시스템의 유지보수성과 운영 안정성에 각각 어떤 기여를 하는지 아키텍처 관점에서 서술하시오.

### 주제 2: 데이터 신뢰성과 백테스트의 한계 극복
수익성 분석 보고서에 따르면 기존 시스템의 백테스트 신뢰도는 35/100으로 낮게 평가되었습니다. 이를 극복하기 위해 제안된 '실데이터 기반 백테스트(MF-1)', '거래 비용 반영', 'Walk-Forward Analysis'가 왜 중요한지, 그리고 이를 무시했을 때 발생할 수 있는 '생존 편향' 및 '과적합' 문제와 연관 지어 설명하시오.

### 주제 3: AI 학습 피드백 루프의 최적화
Phase 4의 지속 학습 시스템은 일일 성과 분석 결과를 모델 재학습에 반영합니다. 17개의 피처 엔지니어링 결과가 어떻게 Phase 2의 종목 선정 정확도를 82%에서 90% 이상으로 향상시킬 수 있는지, '패턴 학습 엔진'과 '파라미터 자동 최적화(베이지안/유전 알고리즘)'의 역할을 중심으로 논하시오.

---

## 5. 시스템 운영 스케줄 (참고용)

| 시간 | 단계 | 주요 작업 내용 |
| :--- | :--- | :--- |
| **06:00** | Phase 1 | AI가 약 2,875개 전체 종목 스크리닝 수행 |
| **08:30** | Phase 2 | 당일 매매 대상 10개 종목 확정 및 추세 분석 |
| **09:00 ~ 15:30** | Trading | 실시간 모니터링 및 자동 매수/매도 실행 |
| **16:00** | Feedback | 장 마감 후 매매 일지 및 데이터 정리 |
| **17:00** | Learning | 일일 성과 분석 리포트 생성 및 AI 학습 데이터 축적 |
| **18:00** | Backtest | 전략 검증 및 익일 매매 파라미터 최적화 |

---
**학습 참고**: 본 시스템은 한국투자증권 KIS API v1.0과 호환되며, Python 3.9 이상의 환경에서 최적화되어 작동합니다. 모든 투자 결정의 책임은 사용자에게 있으므로, 실전 매매 전 충분한 백테스트와 모의투자를 거쳐야 합니다.