# 프로젝트 AI 협업 규칙 템플릿

## 개요
이 문서는 AI와 효율적으로 협업하기 위한 프로젝트 규칙 템플릿입니다.
다른 프로젝트에서도 복사하여 사용할 수 있도록 범용적으로 설계되었습니다.

## 필수 참조 파일 체계

다음 파일들은 프로젝트 작업 시 필수적으로 참조해야 합니다:

- `@PROJECT_SUMMARY.md` - 프로젝트 구조와 주요 기능 요약
- `@ROADMAP.md` - 개발 계획 및 로드맵
- `@.ai/context/project_context.md` - AI 협업을 위한 프로젝트 컨텍스트
- `@.env.example` - 환경 변수 설정 예시 (민감 정보 제외)

## 작업 유형별 참조 파일 관리

### API 개발 작업
- `@core/config/settings.py` - 기본 설정
- `@core/config/api_config.py` - API 관련 설정
- `@core/api/` - API 클라이언트 구현

### 핵심 기능 개발 작업
- `@core/[module_name]/` - 모듈별 핵심 기능
- `@[project_name]_common/` - 공통 라이브러리
- `@main.py` - 메인 실행 파일

### 테스트 및 검증 작업
- `@tests/` - 테스트 코드
- `@[project_name]_backtest/` - 백테스트 엔진 (해당되는 경우)

## 업데이트 규칙

### 필수 업데이트 파일
다음 파일들은 관련 변경 시 반드시 업데이트해야 합니다:

1. **코드 변경 시**:
   - `@PROJECT_SUMMARY.md` - 구조나 기능이 변경된 경우
   - `@ROADMAP.md` - 개발 계획이 변경된 경우
   - `@.ai/context/project_context.md` - 프로젝트 컨텍스트 변경 시

2. **API 관련 변경 시**:
   - `@.env.example` - 새로운 환경 변수가 추가된 경우
   - `@core/config/api_config.py` - API 설정 변경 시

3. **모듈 관련 변경 시**:
   - `@.ai/context/file_references.json` - 참조 파일 목록 업데이트

### TODO/Phase 완료 시 문서 동기화
**한 phase 혹은 한개의 TODO가 끝날 때마다 관련 문서 및 규칙 파일의 동기화가 필수입니다.**

#### 동기화 시점
- **Phase 완료 시**: 전체 Phase가 완료된 후 즉시 동기화
- **TODO 완료 시**: 각 TODO 작업 완료 후 관련 문서 동기화  
- **주요 변경 시**: 구조적 변경이나 중요한 기능 추가 시

#### 동기화 대상 파일
1. **프로젝트 핵심 문서**:
   - `@PROJECT_SUMMARY.md` - 현재 상태 및 진행 상황 반영
   - `@ROADMAP.md` - 계획 변경 사항 반영
   - `@STATUS_REPORT.md` - 최신 성과 및 지표 업데이트

2. **규칙 파일** (프로젝트별 위치 조정):
   - `.cursor/rules/project-status.mdc` - 현재 상황 및 우선순위 업데이트
   - `.cursor/rules/project_phases.md` - Phase 상태 변경 반영
   - `.cursor/rules/implementation_checklist.md` - 체크리스트 상태 업데이트
   - `.cursor/rules/phase[X]_requirements.md` - 해당 Phase 요구사항 상태 업데이트

3. **문서 및 히스토리**:
   - `@docs/` 디렉토리 내 관련 문서 업데이트
   - `@.ai/history/` 디렉토리에 작업 히스토리 기록

#### 동기화 프로세스
1. **변경 사항 분석**: 무엇이 변경되었는지 명확히 파악
2. **영향 범위 확인**: 변경이 어떤 문서들에 영향을 미치는지 분석
3. **순차적 업데이트**: 의존성을 고려하여 순서대로 문서 업데이트
4. **일관성 검증**: 모든 문서 간 일관성 확인
5. **버전 관리**: Git 커밋으로 변경 사항 기록

#### 동기화 체크리스트
- [ ] PROJECT_SUMMARY.md 진행 상황 업데이트
- [ ] ROADMAP.md 계획 변경 사항 반영
- [ ] 규칙 파일들 현재 상황 업데이트
- [ ] 해당 Phase 요구사항 파일 상태 업데이트
- [ ] implementation_checklist.md 체크리스트 상태 업데이트
- [ ] 관련 문서 및 히스토리 기록
- [ ] 메모리 시스템 업데이트 (필요한 경우)

### 메타데이터 업데이트
모든 작업 후 다음 메타데이터를 업데이트합니다:

1. **작업 히스토리**:
   - `@.ai/history/` 디렉토리에 새 작업 기록 추가

2. **워크플로우 및 템플릿**:
   - 새로운 작업 유형 추가 시 `@.ai/workflows/` 디렉토리에 워크플로우 추가
   - 기존 워크플로우 개선 시 관련 파일 업데이트

## 기본 개발 원칙

1. **코드 변경 작업 전**:
   - 관련 파일들을 먼저 읽고 이해
   - 적절한 워크플로우 파일 참조
   - 보안 관련 지침 확인

2. **코드 변경 후**:
   - 테스트 실행 확인
   - 문서 및 메타데이터 업데이트
   - 변경 내역 요약 제공

3. **보안 관련 원칙**:
   - API 키, 토큰 등 민감 정보는 절대 하드코딩하지 않음
   - 항상 .env 파일 사용
   - 민감 정보가 로그에 기록되지 않도록 함

4. **성능 최적화 원칙**:
   - 병렬 처리 활용 (가능한 경우)
   - 메모리 효율성 고려
   - 데이터베이스 쿼리 최적화

5. **코드 품질 원칙**:
   - 가독성 및 유지보수성 최우선
   - 완전한 구현 (TODO 노트 제거)
   - 의미 있는 변수 및 함수 명명
   - 적절한 주석 및 문서화

## TODO 추적 시스템

### 버전 체계
- **1.x 시리즈**: 기본 시스템 구축
- **2.x 시리즈**: 핵심 기능 개발
- **3.x 시리즈**: 고급 기능 개발
- **4.x 시리즈**: 시스템 확장 및 최적화

### 개발 방법론
- **단계별 개발**: 각 TODO 단계별 완료 후 다음 단계 진행
- **의존성 관리**: 각 TODO 간의 의존성 명확히 정의
- **지속적 테스트**: 각 단계 완료 시 테스트 수행
- **문서화**: 모든 변경 사항 문서 업데이트

### TODO 상태 관리
- **✅ 완료**: 구현 및 테스트 완료
- **🔄 진행 중**: 현재 작업 중
- **📋 계획됨**: 다음 단계 계획
- **⏸️ 보류**: 임시 보류 상태
- **⏳ 대기**: 의존성 대기 상태

## 프로젝트 구조 템플릿

```
[project_name]/
├── core/                     # 핵심 기능
│   ├── config/              # 설정 관리
│   ├── api/                 # API 클라이언트
│   ├── [module1]/           # 모듈 1
│   ├── [module2]/           # 모듈 2
│   ├── utils/               # 유틸리티
│   └── database/            # 데이터베이스 (필요한 경우)
├── [project_name]_common/   # 공통 라이브러리
│   ├── data/                # 데이터 관리
│   ├── indicators/          # 지표 (해당되는 경우)
│   ├── models/              # 데이터 모델
│   └── utils/               # 공통 유틸리티
├── [project_name]_backtest/ # 백테스트 엔진 (해당되는 경우)
├── workflows/               # 워크플로우
├── .ai/                     # AI 협업 관련
│   ├── context/             # 컨텍스트 정보
│   ├── history/             # 작업 히스토리
│   └── workflows/           # AI 워크플로우
├── data/                    # 데이터 저장소
├── docs/                    # 문서
├── tests/                   # 테스트
├── scripts/                 # 스크립트
├── logs/                    # 로그
├── main.py                  # 메인 실행 파일
├── PROJECT_SUMMARY.md       # 프로젝트 요약
├── ROADMAP.md               # 로드맵
├── README.md                # 리드미
├── requirements.txt         # 의존성
└── .env.example            # 환경 변수 예시
```

## 데이터 관리 규칙

1. **환경 구분**:
   - 개발(dev), 테스트(test), 운영(prod) 환경 명확히 구분
   - 각 환경별 설정 및 토큰 관리 분리

2. **데이터 저장**:
   - 각 모듈별 데이터는 `data/[module_name]/` 디렉토리에 저장
   - JSON 형태로 구조화된 데이터 저장
   - 버전 관리 및 메타데이터 포함

3. **민감 데이터 관리**:
   - 민감 데이터는 `.gitignore`에 포함되어 있는지 확인
   - 토큰 정보는 별도 디렉토리에 저장
   - 로깅 시 민감 정보 마스킹 처리

## 성능 모니터링 및 최적화

### 주요 지표
- **처리 속도**: 데이터 처리 시간 측정
- **시스템 안정성**: 가동률 및 오류율
- **메모리 사용량**: 메모리 효율성
- **API 호출 성공률**: 외부 API 연동 성공률

### 최적화 전략
- **병렬 처리**: 가능한 작업의 병렬 처리 적용
- **캐싱**: 중복 계산 방지를 위한 캐싱 전략
- **데이터베이스 최적화**: 쿼리 성능 최적화
- **메모리 관리**: 효율적인 메모리 사용

## AI 협업 지침

### 1. 작업 시작 시
먼저 기본 컨텍스트 파일을 읽고 시작
```
.ai/context/project_context.md 파일을 읽고 프로젝트를 이해해주세요.
```

### 2. 작업 유형별 참조
작업 유형에 맞는 파일 참조 요청
```
.ai/context/file_references.json에서 [작업유형] 관련 파일들을 확인해주세요.
```

### 3. 워크플로우 기반 작업
명확한 워크플로우 지정
```
.ai/workflows/[워크플로우명].md에 따라 작업을 진행해주세요.
```

### 4. 히스토리 관리
작업 완료 후 히스토리 기록
```
방금 완료한 작업을 .ai/history/ 디렉토리에 기록해주세요.
```

### 5. 단계별 사고 과정
복잡한 작업의 경우 단계별 사고 과정 활용
```
이 작업을 단계별로 분석하고 진행해주세요.
```

## 메모리 시스템 활용

### 자동 메모리 관리
AI가 자동으로 다음 정보들을 학습하고 기억합니다:

- **사용자 선호도**: 작업 패턴 및 스타일 자동 학습
- **프로젝트 특성**: 제약사항 및 성공 패턴 축적
- **성능 최적화**: 효과적인 설정값 기록
- **오류 패턴**: 반복 실수 방지를 위한 교훈 저장

### 메모리 업데이트 기준
- **모순 정보**: 기존 메모리 삭제 후 새 정보 생성
- **보완 정보**: 기존 메모리 업데이트로 내용 보강
- **진행 상황**: 프로젝트 진행에 따른 상태 업데이트
- **사용 빈도**: 자주 사용하는 정보 우선순위 상향

### 메모리 활용 방법
```
# 메모리 상태 확인
"지금까지 기억하고 있는 내용들을 정리해줘"

# 선호도 확인
"내 작업 선호도를 어떻게 파악했는지 보여줘"

# 제약사항 확인
"프로젝트 관련해서 기억하고 있는 제약사항들이 뭐야?"
```

## 테스트 및 검증 규칙

### 테스트 유형
- **단위 테스트**: 각 모듈별 기능 테스트
- **통합 테스트**: 모듈 간 연동 테스트
- **성능 테스트**: 처리 성능 및 안정성 테스트

### 검증 기준
- **테스트 통과율**: 90% 이상
- **코드 커버리지**: 80% 이상
- **성능 기준**: 기대 성능 대비 달성률
- **안정성 기준**: 오류율 1% 이하

## 프로젝트 적용 방법

### 1. 초기 설정
```bash
# 프로젝트 구조 생성
mkdir -p .ai/context .ai/history .ai/workflows
mkdir -p core/config core/api core/utils
mkdir -p data docs tests scripts logs workflows

# 필수 파일 생성
touch PROJECT_SUMMARY.md ROADMAP.md README.md
touch .ai/context/project_context.md
touch .ai/context/file_references.json
touch .env.example requirements.txt
```

### 2. 프로젝트별 커스터마이징
- `[project_name]` 부분을 실제 프로젝트명으로 변경
- 프로젝트 특성에 맞게 모듈 구조 조정
- 필요한 추가 규칙 및 지침 추가

### 3. AI 협업 설정
- `.ai/context/project_context.md`에 프로젝트 특화 정보 입력
- `.ai/context/file_references.json`에 작업 유형별 참조 파일 정의
- `.ai/workflows/`에 프로젝트 특화 워크플로우 추가

### 4. 지속적 개선
- 작업 히스토리 누적을 통한 규칙 개선
- 성과 분석을 통한 최적화 방안 도출
- 팀원 피드백을 통한 협업 규칙 개선

## 결론

이 규칙을 준수하여 프로젝트를 일관되고 효율적으로 개발할 수 있으며, 
AI와의 협업을 통해 높은 품질의 결과물을 달성할 수 있습니다.

각 프로젝트의 특성에 맞게 이 템플릿을 적용하고 지속적으로 개선하여 
더 나은 개발 경험을 만들어가시기 바랍니다. 