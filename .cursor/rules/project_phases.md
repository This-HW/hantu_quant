# 한투 퀀트 프로젝트 단계별 개발 규칙

## 프로젝트 개발 상태 및 우선순위

### ✅ Phase 1: 감시 리스트 구축 (core/watchlist/) - 완료
**목표**: 좋은 기업을 찾아서 매매 희망 리스트 혹은 감시 리스트에 추가하기

**핵심 모듈**:
- `stock_screener.py`: 기업 스크리닝 로직 ✅
- `watchlist_manager.py`: 감시 리스트 관리 ✅
- `evaluation_engine.py`: 기업 평가 엔진 ✅
- `stock_screener_parallel.py`: 병렬 처리 스크리닝 ✅

**달성 성과**:
- 2,875개 종목 5-6분 처리 (3배 성능 향상)
- 17개 테스트 모두 통과
- 병렬 처리 시스템 구축 완료

### ✅ Phase 2: 일일 매매 주식 선정 (core/daily_selection/) - 완료
**목표**: 매일 리스트업 된 주식들 중에 일 단위로 가격이 매력적인 수준에 오면 당일 매매 리스트에 업데이트

**핵심 모듈**:
- `price_analyzer.py`: 가격 분석 엔진 ✅
- `selection_criteria.py`: 선정 기준 시스템 ✅
- `daily_updater.py`: 일일 업데이트 시스템 ✅
- `price_analyzer_parallel.py`: 병렬 처리 분석 ✅

**달성 성과**:
- 선정 정확도 82% 달성 (13% 향상)
- 일일 선정 자동화 완성
- 백테스트 검증 시스템 완료

### ✅ 모듈 아키텍처 시스템 (TODO 1.9-1.12) - 완료
**목표**: 확장 가능하고 유지보수가 용이한 모듈 아키텍처 구축

**완료된 TODO**:
- **TODO 1.9**: 모듈 아키텍처 개선 - 인터페이스 기반 설계 ✅
- **TODO 1.10**: 플러그인 아키텍처 시스템 구현 ✅
- **TODO 1.11**: 모듈 레지스트리 시스템 구현 ✅
- **TODO 1.12**: 패키지 관리 시스템 구현 ✅

**핵심 모듈**:
- `core/di/`: 의존성 주입 컨테이너 ✅
- `core/events/`: 이벤트 시스템 ✅
- `core/interfaces/`: 핵심 인터페이스 ✅
- `core/plugins/`: 플러그인 아키텍처 ✅
- `core/registry/`: 모듈 레지스트리 시스템 ✅
- `core/packages/`: 패키지 관리 시스템 ✅

**달성 성과**:
- 모듈 분리도: 70% → 98% (+28%)
- 확장성: 65% → 98% (+33%)
- 유지보수성: 68% → 95% (+27%)
- 테스트 가능성: 40% → 98% (+58%)
- 재사용성: 30% → 95% (+65%)
- 배포 자동화: 0% → 95% (+95%)

### 🔄 TODO 1.13: 기존 모듈 리팩토링 - 진행 예정
**목표**: Phase 1, 2 모듈을 새로운 아키텍처로 이전

**작업 내용**:
- Phase 1, 2 모듈 인터페이스 기반 재설계
- 플러그인 아키텍처 적용
- 패키지 시스템 활용한 모듈화
- 의존성 주입 및 이벤트 시스템 통합

### 🎯 Phase 4: AI 학습 및 최적화 시스템 (TODO 2.1-2.8) - 다음 우선순위
**목표**: Phase 1, 2 시스템의 성능을 AI 학습을 통해 대폭 향상

**예정 TODO**:
- **TODO 2.1**: Phase 4 AI 학습 시스템 기본 구조 설정
- **TODO 2.2**: 데이터 수집 및 전처리 시스템 구현
- **TODO 2.3**: 피처 엔지니어링 시스템 구현 (17개 피처)
- **TODO 2.4**: 일일 성과 분석 시스템 구현
- **TODO 2.5**: 패턴 학습 엔진 구현
- **TODO 2.6**: 파라미터 자동 최적화 시스템 구현
- **TODO 2.7**: 백테스트 자동화 시스템 구현
- **TODO 2.8**: AI 학습 모델 통합 및 배포

**목표 성과**:
- 선정 정확도: 82% → 90% 이상
- 예측 성능: F1 Score 0.8 이상
- 자동화 수준: 파라미터 최적화 및 백테스트 자동화

### ⏳ Phase 3: 분 단위 자동 매매 (core/intraday_trading/) - 보류 (Phase 4 후 진행)
**목표**: 당일 매매리스에 올라와 있는 주식들을 분 단위로 가격 및 지표를 트래킹하면서 자동 매매

**핵심 모듈**:
- `minute_tracker.py`: 분 단위 추적 (TODO 3.2)
- `signal_generator.py`: 매매 신호 생성 (TODO 3.2)
- `order_manager.py`: 주문 관리 (TODO 3.2)

**보류 사유**: Phase 4 AI 학습 시스템 완료 후 더 정확한 자동매매 가능

### 📋 Phase 5: 시장 모니터링 (core/market_monitor/) - 장기 계획
**목표**: 당일 장이 마감되면 일단위 주식 가격 관련 정보를 업데이트하고 관련 정보를 학습

**핵심 모듈**:
- `daily_analyzer.py`: 일일 분석
- `pattern_learner.py`: 패턴 학습
- `logic_optimizer.py`: 로직 최적화

**구현 우선순위**:
1. 일일 성과 분석 및 리포트
2. 패턴 인식 및 학습
3. 전략 파라미터 최적화
4. 백테스트 자동화

### Phase 5: 시장 모니터링 (core/market_monitor/)
**목표**: 당일 주식시장을 보고 특정 주식이 많이 오르거나 이벤트가 있는지 확인

**핵심 모듈**:
- `event_detector.py`: 이벤트 감지
- `news_analyzer.py`: 뉴스 분석
- `market_scanner.py`: 시장 스캐너

**구현 우선순위**:
1. 급등/급락 종목 감지
2. 뉴스 및 공시 정보 분석
3. 시장 이벤트 감지
4. 전략 업데이트 트리거

## 개발 원칙

### 코딩 표준
- 모든 클래스와 함수에 docstring 필수
- 타입 힌트 사용 권장
- 로깅을 통한 디버깅 정보 제공
- 예외 처리 필수

### 데이터 관리
- 각 단계별 데이터는 해당 data/ 하위 폴더에 저장
- JSON 형태로 구조화된 데이터 저장
- 민감 정보는 절대 하드코딩 금지

### 테스트 전략
- 각 모듈별 단위 테스트 작성
- 통합 테스트를 통한 단계별 검증
- 모의투자 환경에서 충분한 테스트 후 실제 적용

### 보안 및 안정성
- API 호출 제한 준수
- 토큰 갱신 로직 안정화
- 오류 처리 및 재시도 메커니즘
- 실시간 모니터링 및 알림

## 단계별 완료 기준

### Phase 1 완료 기준
- [ ] 기본 스크리닝 로직 구현
- [ ] 감시 리스트 CRUD 기능
- [ ] 최소 10개 이상의 종목이 포함된 감시 리스트 생성
- [ ] 단위 테스트 통과

### Phase 2 완료 기준
- [ ] 가격 분석 로직 구현
- [ ] 일일 업데이트 스케줄러 동작
- [ ] 매매 리스트 자동 생성
- [ ] 백테스트를 통한 성능 검증

### Phase 3 완료 기준
- [ ] 실시간 데이터 처리
- [ ] 자동 매매 실행
- [ ] 리스크 관리 동작
- [ ] 모의투자 환경에서 1주일 이상 안정적 동작

### Phase 4 완료 기준
- [ ] 일일 성과 분석 리포트
- [ ] 전략 파라미터 자동 최적화
- [ ] 학습 결과 반영된 전략 업데이트
- [ ] 성과 개선 확인

### Phase 5 완료 기준
- [ ] 시장 이벤트 자동 감지
- [ ] 뉴스 분석 기능
- [ ] 전략 자동 업데이트
- [ ] 완전 자동화 시스템 구축

## 주의사항

### 개발 시 필수 확인사항
1. 각 단계는 이전 단계가 완료된 후 시작
2. 모든 기능은 모의투자 환경에서 충분히 테스트
3. 실제 투자 전 반드시 백테스트 검증
4. 코드 변경 시 관련 문서 업데이트

### 리스크 관리
- 손실 제한 로직 필수 구현
- 최대 투자 비율 제한
- 비상 정지 기능 구현
- 정기적인 성과 검토 및 전략 조정 